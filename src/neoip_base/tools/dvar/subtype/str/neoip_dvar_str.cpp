/*! \file
    \brief Declaration of the dvar_str_t
*/

/* system include */
/* local include */
#include "neoip_dvar_str.hpp"
#include "neoip_log.hpp"
#include "neoip_nipmem_alloc.hpp"

NEOIP_NAMESPACE_BEGIN

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
//                       ctor/dtor
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

/** \brief clone this object
 */
dvar_vapi_t *	dvar_str_t::clone()	const throw()
{
	return nipmem_new dvar_str_t(value);	
}


////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//                      compare() function
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

/** \brief Compare the object ala memcmp
 */
int 	dvar_str_t::compare(const dvar_vapi_t &other_vapi)	const throw()
{
	// sanity check - check that other_vapi is of the same dvar_type_t
	DBG_ASSERT( other_vapi.type() == type() );
	// convert the other_vapi
	const dvar_str_t &	other	= dynamic_cast <const dvar_str_t &>(other_vapi);
	// compare the value
	if( value < other.value )	return -1;
	if( value > other.value )	return +1;
	// here both are considered equal
	return 0;
}


////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//                         display function
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

/** \brief Convert the object to a std::string
 */
std::string	dvar_str_t::to_string()	const throw()
{
	std::ostringstream	oss;
	// put the value
	oss << "\"" << value << "\"";
	// return the just built string
	return oss.str();	
}

NEOIP_NAMESPACE_END







