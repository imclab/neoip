if(!("console" in window)||!("firebug" in console)){(function(){window.console={log:function(){logFormatted(arguments,"")},debug:function(){logFormatted(arguments,"debug")},info:function(){logFormatted(arguments,"info")},warn:function(){logFormatted(arguments,"warning")},error:function(){logFormatted(arguments,"error")},assert:function(truth,message){if(!truth){var args=[];for(var i=1;i<arguments.length;++i){args.push(arguments[i])}logFormatted(args.length?args:["Assertion Failure"],"error");throw message?message:"Assertion Failure"}},dir:function(object){var html=[];var pairs=[];for(var name in object){try{pairs.push([name,object[name]])}catch(exc){}}pairs.sort(function(a,b){return a[0]<b[0]?-1:1});html.push("<table>");for(var i=0;i<pairs.length;++i){var name=pairs[i][0],value=pairs[i][1];html.push("<tr>",'<td class="propertyNameCell"><span class="propertyName">',escapeHTML(name),"</span></td>",'<td><span class="propertyValue">');appendObject(value,html);html.push("</span></td></tr>")}html.push("</table>");logRow(html,"dir")},dirxml:function(node){var html=[];appendNode(node,html);logRow(html,"dirxml")},group:function(){logRow(arguments,"group",pushGroup)},groupEnd:function(){logRow(arguments,"",popGroup)},time:function(name){timeMap[name]=(new Date()).getTime()},timeEnd:function(name){if(name in timeMap){var delta=(new Date()).getTime()-timeMap[name];logFormatted([name+":",delta+"ms"]);delete timeMap[name]}},count:function(){this.warn(["count() not supported."])},trace:function(){this.warn(["trace() not supported."])},profile:function(){this.warn(["profile() not supported."])},profileEnd:function(){},clear:function(){consoleBody.innerHTML=""},open:function(){toggleConsole(true)},close:function(){if(frameVisible){toggleConsole()}}};var consoleFrame=null;var consoleBody=null;var commandLine=null;var frameVisible=false;var messageQueue=[];var groupStack=[];var timeMap={};var clPrefix=">>> ";var isFirefox=navigator.userAgent.indexOf("Firefox")!=-1;var isIE=navigator.userAgent.indexOf("MSIE")!=-1;var isOpera=navigator.userAgent.indexOf("Opera")!=-1;var isSafari=navigator.userAgent.indexOf("AppleWebKit")!=-1;function toggleConsole(forceOpen){frameVisible=forceOpen||!frameVisible;if(consoleFrame){consoleFrame.style.visibility=frameVisible?"visible":"hidden"}else{waitForBody()}}function focusCommandLine(){toggleConsole(true);if(commandLine){commandLine.focus()}}function waitForBody(){if(document.body){createFrame()}else{setTimeout(waitForBody,200)}}function createFrame(){if(consoleFrame){return }window.onFirebugReady=function(doc){window.onFirebugReady=null;var toolbar=doc.getElementById("toolbar");toolbar.onmousedown=onSplitterMouseDown;commandLine=doc.getElementById("commandLine");addEvent(commandLine,"keydown",onCommandLineKeyDown);addEvent(doc,isIE||isSafari?"keydown":"keypress",onKeyDown);consoleBody=doc.getElementById("log");layout();flush()};var baseURL=getFirebugURL();consoleFrame=document.createElement("iframe");consoleFrame.setAttribute("src",baseURL+"/firebug.html");consoleFrame.setAttribute("frameBorder","0");consoleFrame.style.visibility=(frameVisible?"visible":"hidden");consoleFrame.style.zIndex="2147483647";consoleFrame.style.position="fixed";consoleFrame.style.width="100%";consoleFrame.style.left="0";consoleFrame.style.bottom="0";consoleFrame.style.height="200px";document.body.appendChild(consoleFrame)}function getFirebugURL(){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;++i){if(scripts[i].src.indexOf("firebug.js")!=-1){var lastSlash=scripts[i].src.lastIndexOf("/");return scripts[i].src.substr(0,lastSlash)}}return null}function evalCommandLine(){var text=commandLine.value;commandLine.value="";logRow([clPrefix,text],"command");var value;try{value=eval(text)}catch(exc){}console.log(value)}function layout(){var toolbar=consoleBody.ownerDocument.getElementById("toolbar");var height=consoleFrame.offsetHeight-(toolbar.offsetHeight+commandLine.offsetHeight);consoleBody.style.top=toolbar.offsetHeight+"px";consoleBody.style.height=height+"px";commandLine.style.top=(consoleFrame.offsetHeight-commandLine.offsetHeight)+"px"}function logRow(message,className,handler){if(consoleBody){writeMessage(message,className,handler)}else{messageQueue.push([message,className,handler]);waitForBody()}}function flush(){var queue=messageQueue;messageQueue=[];for(var i=0;i<queue.length;++i){writeMessage(queue[i][0],queue[i][1],queue[i][2])}}function writeMessage(message,className,handler){var isScrolledToBottom=consoleBody.scrollTop+consoleBody.offsetHeight>=consoleBody.scrollHeight;if(!handler){handler=writeRow}handler(message,className);if(isScrolledToBottom){consoleBody.scrollTop=consoleBody.scrollHeight-consoleBody.offsetHeight}}function appendRow(row){var container=groupStack.length?groupStack[groupStack.length-1]:consoleBody;container.appendChild(row)}function writeRow(message,className){var row=consoleBody.ownerDocument.createElement("div");row.className="logRow"+(className?" logRow-"+className:"");row.innerHTML=message.join("");appendRow(row)}function pushGroup(message,className){logFormatted(message,className);var groupRow=consoleBody.ownerDocument.createElement("div");groupRow.className="logGroup";var groupRowBox=consoleBody.ownerDocument.createElement("div");groupRowBox.className="logGroupBox";groupRow.appendChild(groupRowBox);appendRow(groupRowBox);groupStack.push(groupRowBox)}function popGroup(){groupStack.pop()}function logFormatted(objects,className){var html=[];var format=objects[0];var objIndex=0;if(typeof (format)!="string"){format="";objIndex=-1}var parts=parseFormat(format);for(var i=0;i<parts.length;++i){var part=parts[i];if(part&&typeof (part)=="object"){var object=objects[++objIndex];part.appender(object,html)}else{appendText(part,html)}}for(var i=objIndex+1;i<objects.length;++i){appendText(" ",html);var object=objects[i];if(typeof (object)=="string"){appendText(object,html)}else{appendObject(object,html)}}logRow(html,className)}function parseFormat(format){var parts=[];var reg=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;var appenderMap={s:appendText,d:appendInteger,i:appendInteger,f:appendFloat};for(var m=reg.exec(format);m;m=reg.exec(format)){var type=m[8]?m[8]:m[5];var appender=type in appenderMap?appenderMap[type]:appendObject;var precision=m[3]?parseInt(m[3]):(m[4]=="."?-1:0);parts.push(format.substr(0,m[0][0]=="%"?m.index:m.index+1));parts.push({appender:appender,precision:precision});format=format.substr(m.index+m[0].length)}parts.push(format);return parts}function escapeHTML(value){function replaceChars(ch){switch(ch){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&#39;";case'"':return"&quot;"}return"?"}return String(value).replace(/[<>&"']/g,replaceChars)}function objectToString(object){try{return object+""}catch(exc){return null}}function appendText(object,html){html.push(escapeHTML(objectToString(object)))}function appendNull(object,html){html.push('<span class="objectBox-null">',escapeHTML(objectToString(object)),"</span>")}function appendString(object,html){html.push('<span class="objectBox-string">&quot;',escapeHTML(objectToString(object)),"&quot;</span>")}function appendInteger(object,html){html.push('<span class="objectBox-number">',escapeHTML(objectToString(object)),"</span>")}function appendFloat(object,html){html.push('<span class="objectBox-number">',escapeHTML(objectToString(object)),"</span>")}function appendFunction(object,html){var reName=/function ?(.*?)\(/;var m=reName.exec(objectToString(object));var name=m?m[1]:"function";html.push('<span class="objectBox-function">',escapeHTML(name),"()</span>")}function appendObject(object,html){try{if(object==undefined){appendNull("undefined",html)}else{if(object==null){appendNull("null",html)}else{if(typeof object=="string"){appendString(object,html)}else{if(typeof object=="number"){appendInteger(object,html)}else{if(typeof object=="function"){appendFunction(object,html)}else{if(object.nodeType==1){appendSelector(object,html)}else{if(typeof object=="object"){appendObjectFormatted(object,html)}else{appendText(object,html)}}}}}}}}catch(exc){}}function appendObjectFormatted(object,html){var text=objectToString(object);var reObject=/\[object (.*?)\]/;var m=reObject.exec(text);html.push('<span class="objectBox-object">',m?m[1]:text,"</span>")}function appendSelector(object,html){html.push('<span class="objectBox-selector">');html.push('<span class="selectorTag">',escapeHTML(object.nodeName.toLowerCase()),"</span>");if(object.id){html.push('<span class="selectorId">#',escapeHTML(object.id),"</span>")}if(object.className){html.push('<span class="selectorClass">.',escapeHTML(object.className),"</span>")}html.push("</span>")}function appendNode(node,html){if(node.nodeType==1){html.push('<div class="objectBox-element">','&lt;<span class="nodeTag">',node.nodeName.toLowerCase(),"</span>");for(var i=0;i<node.attributes.length;++i){var attr=node.attributes[i];if(!attr.specified){continue}html.push('&nbsp;<span class="nodeName">',attr.nodeName.toLowerCase(),'</span>=&quot;<span class="nodeValue">',escapeHTML(attr.nodeValue),"</span>&quot;")}if(node.firstChild){html.push('&gt;</div><div class="nodeChildren">');for(var child=node.firstChild;child;child=child.nextSibling){appendNode(child,html)}html.push('</div><div class="objectBox-element">&lt;/<span class="nodeTag">',node.nodeName.toLowerCase(),"&gt;</span></div>")}else{html.push("/&gt;</div>")}}else{if(node.nodeType==3){html.push('<div class="nodeText">',escapeHTML(node.nodeValue),"</div>")}}}function addEvent(object,name,handler){if(document.all){object.attachEvent("on"+name,handler)}else{object.addEventListener(name,handler,false)}}function removeEvent(object,name,handler){if(document.all){object.detachEvent("on"+name,handler)}else{object.removeEventListener(name,handler,false)}}function cancelEvent(event){if(document.all){event.cancelBubble=true}else{event.stopPropagation()}}function onError(msg,href,lineNo){var html=[];var lastSlash=href.lastIndexOf("/");var fileName=lastSlash==-1?href:href.substr(lastSlash+1);html.push('<span class="errorMessage">',msg,"</span>",'<div class="objectBox-sourceLink">',fileName," (line ",lineNo,")</div>");logRow(html,"error")}function onKeyDown(event){if(event.keyCode==123){toggleConsole()}else{if((event.keyCode==108||event.keyCode==76)&&event.shiftKey&&(event.metaKey||event.ctrlKey)){focusCommandLine()}else{return }}cancelEvent(event)}function onSplitterMouseDown(event){if(isSafari||isOpera){return }addEvent(document,"mousemove",onSplitterMouseMove);addEvent(document,"mouseup",onSplitterMouseUp);for(var i=0;i<frames.length;++i){addEvent(frames[i].document,"mousemove",onSplitterMouseMove);addEvent(frames[i].document,"mouseup",onSplitterMouseUp)}}function onSplitterMouseMove(event){var win=document.all?event.srcElement.ownerDocument.parentWindow:event.target.ownerDocument.defaultView;var clientY=event.clientY;if(win!=win.parent){clientY+=win.frameElement?win.frameElement.offsetTop:0}var height=consoleFrame.offsetTop+consoleFrame.clientHeight;var y=height-clientY;consoleFrame.style.height=y+"px";layout()}function onSplitterMouseUp(event){removeEvent(document,"mousemove",onSplitterMouseMove);removeEvent(document,"mouseup",onSplitterMouseUp);for(var i=0;i<frames.length;++i){removeEvent(frames[i].document,"mousemove",onSplitterMouseMove);removeEvent(frames[i].document,"mouseup",onSplitterMouseUp)}}function onCommandLineKeyDown(event){if(event.keyCode==13){evalCommandLine()}else{if(event.keyCode==27){commandLine.value=""}}}window.onerror=onError;addEvent(document,isIE||isSafari?"keydown":"keypress",onKeyDown);if(document.documentElement.getAttribute("debug")=="true"){toggleConsole(true)}})()}if(typeof neoip=="undefined"){var neoip={}}neoip.core_t=function(){};neoip.core=new neoip.core_t();neoip.core_t.prototype.object_clone=function(A,D){if(typeof (A)!="object"){return A}if(A==null){return A}var C=new Object();if(D==true){for(var B in A){C[B]=neoip.object_clone(A[B],D)}}else{for(var B in A){C[B]=A[B]}}return C};neoip.core_t.prototype.build_nonce_str=function(A){var D="";for(var C=0;C<A;C++){var B=Math.floor(Math.random()*(26+26+10));if(B<26){D+=String.fromCharCode(B+"A".charCodeAt(0))}else{if(B<(26+26)){D+=String.fromCharCode(B-(26)+"a".charCodeAt(0))}else{D+=String.fromCharCode(B-(26+26)+"0".charCodeAt(0))}}}return D};objembed_wait4init=function(html_id,fct_str,cur_delay,max_delay,callback){var flash_elem=document.getElementById(html_id);if(flash_elem==undefined||eval("typeof(flash_elem."+fct_str+")")!="function"){var next_delay=cur_delay*2;next_delay=Math.min(next_delay,max_delay);var timeout_cb=function(){objembed_wait4init(html_id,fct_str,next_delay,max_delay,callback)};setTimeout(timeout_cb,cur_delay,this);return }callback()};neoip.core_t.prototype.dom_event_listener=function(B,C,A){if(B.addEventListener){B.addEventListener(C,A,false);return true}else{if(B.attachEvent){return B.attachEvent("on"+C,A)}else{return false}}};neoip.basic_cb_t=function(A,C){var B=C||window;return function(){A.call(B)}};neoip.core_t.prototype.download_file_insync=function(A){var B=new XMLHttpRequest();B.open("GET",A,false);B.send(null);if(B.status!=200){return null}return B.responseText};neoip.core_t.prototype.cookie_write=function(C,D,E){if(E){var B=new Date();B.setTime(B.getTime()+(E*24*60*60*1000));var A="; expires="+B.toGMTString()}else{var A=""}document.cookie=C+"="+D+A+"; path=/"};neoip.core_t.prototype.cookie_read=function(B){var D=B+"=";var A=document.cookie.split(";");for(var C=0;C<A.length;C++){var E=A[C];while(E.charAt(0)==" "){E=E.substring(1,E.length)}if(E.indexOf(D)==0){return E.substring(D.length,E.length)}}return null};neoip.core_t.prototype.cookie_delete=function(A){createCookie(A,"",-1)};var neoip_base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",encode_safe:function(C){var A="";var J,H,F,I,G,E,D;var B=0;C=this._utf8_encode(C);while(B<C.length){J=C.charCodeAt(B++);H=C.charCodeAt(B++);F=C.charCodeAt(B++);I=J>>2;G=((J&3)<<4)|(H>>4);E=((H&15)<<2)|(F>>6);D=F&63;if(isNaN(H)){E=D=64}else{if(isNaN(F)){D=64}}A=A+this._keyStr.charAt(I)+this._keyStr.charAt(G)+this._keyStr.charAt(E)+this._keyStr.charAt(D)}return A},decode_safe:function(C){var A="";var J,H,F;var I,G,E,D;var B=0;C=C.replace(/[^A-Za-z0-9\-\_\=]/g,"");while(B<C.length){I=this._keyStr.indexOf(C.charAt(B++));G=this._keyStr.indexOf(C.charAt(B++));E=this._keyStr.indexOf(C.charAt(B++));D=this._keyStr.indexOf(C.charAt(B++));J=(I<<2)|(G>>4);H=((G&15)<<4)|(E>>2);F=((E&3)<<6)|D;A=A+String.fromCharCode(J);if(E!=64){A=A+String.fromCharCode(H)}if(D!=64){A=A+String.fromCharCode(F)}}A=this._utf8_decode(A);return A},_utf8_encode:function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A},_utf8_decode:function(A){var B="";var C=0;var D=c1=c2=0;while(C<A.length){D=A.charCodeAt(C);if(D<128){B+=String.fromCharCode(D);C++}else{if((D>191)&&(D<224)){c2=A.charCodeAt(C+1);B+=String.fromCharCode(((D&31)<<6)|(c2&63));C+=2}else{c2=A.charCodeAt(C+1);c3=A.charCodeAt(C+2);B+=String.fromCharCode(((D&15)<<12)|((c2&63)<<6)|(c3&63));C+=3}}}return B}};if(typeof neoip=="undefined"){var neoip={}}neoip.nested_uri_builder_t=function(){this.m_dupuri_arr=new Array;this.m_var_arr=new Array};neoip.nested_uri_builder_t.prototype.inner_uri=function(A){this.m_inner_uri=A};neoip.nested_uri_builder_t.prototype.outter_uri=function(A){this.m_outter_uri=A};neoip.nested_uri_builder_t.prototype.set_var=function(A,B){if(A=="dupuri"){this.m_dupuri_arr.push(B)}else{if(A=="subfile_path"){this.m_var_arr["subfile_level"]=B.split("/").length-1;this.m_subfile_path=B}else{this.m_var_arr[A]=B}}};neoip.nested_uri_builder_t.prototype.set_var_arr=function(A){for(var B in A){this.set_var(B,A[B])}};neoip.nested_uri_builder_t.prototype._is_sane_internal=function(){if(!this.m_outter_uri){throw new Error("No outter_uri")}if(!this.m_inner_uri){throw new Error("No inner_uri")}};neoip.nested_uri_builder_t.prototype.is_sane=function(){try{this._is_sane_internal()}catch(A){console.log("nested_uri_build_t not sane due to "+A);return false}return true};neoip.nested_uri_builder_t.prototype.to_string=function(){var A="";console.assert(this.is_sane());A+=this.m_outter_uri+"/";if(this.m_var_arr["mod"]){A+=this.m_var_arr["mod"]+"/"}for(var B in this.m_var_arr){if(B=="mod"){continue}if(B.indexOf("neoip_metavar_")==0){continue}A+="*"+B+"*";if(B=="announce_uri"){A+=neoip_base64.encode_safe(this.m_var_arr[B])}else{A+=this.m_var_arr[B]}A+="/"}for(var C in this.m_dupuri_arr){A+="*dupuri*";A+=neoip_base64.encode_safe(this.m_dupuri_arr[C]);A+="/"}var D=this.m_inner_uri.indexOf("?");if(D!=-1){A+=this.m_inner_uri.substr(0,D)}else{A+=this.m_inner_uri}if(this.m_subfile_path){A+=this.m_subfile_path}if(D!=-1){A+=this.m_inner_uri.substr(D,this.m_inner_uri.length)}for(var B in this.m_var_arr){if(B.indexOf("neoip_metavar_")!=0){continue}A+=A.indexOf("?")==-1?"?":"&";A+=B+"="+escape(this.m_var_arr[B])}return A};if(typeof deconcept=="undefined"){var deconcept=new Object()}if(typeof deconcept.util=="undefined"){deconcept.util=new Object()}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object()}deconcept.SWFObject=function(K,B,L,D,H,I,F,E,C,J){if(!document.getElementById){return }this.DETECT_KEY=J?J:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(K){this.setAttribute("swf",K)}if(B){this.setAttribute("id",B)}if(L){this.setAttribute("width",L)}if(D){this.setAttribute("height",D)}if(H){this.setAttribute("version",new deconcept.PlayerVersion(H.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(I){this.addParam("bgcolor",I)}var A=F?F:"high";this.addParam("quality",A);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var G=(E)?E:window.location;this.setAttribute("xiRedirectUrl",G);this.setAttribute("redirectUrl","");if(C){this.setAttribute("redirectUrl",C)}};deconcept.SWFObject.prototype={useExpressInstall:function(A){this.xiSWFPath=!A?"expressinstall.swf":A;this.setAttribute("useExpressInstall",true)},setAttribute:function(A,B){this.attributes[A]=B},getAttribute:function(A){return this.attributes[A]},addParam:function(B,A){this.params[B]=A},getParams:function(){return this.params},addVariable:function(B,A){this.variables[B]=A},getVariable:function(A){return this.variables[A]},getVariables:function(){return this.variables},getVariablePairs:function(){var C=new Array();var B;var A=this.getVariables();for(B in A){C[C.length]=B+"="+A[B]}return C},getSWFHTML:function(){var B="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}B='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';B+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var F=this.getParams();for(var E in F){B+=[E]+'="'+F[E]+'" '}var D=this.getVariablePairs().join("&");if(D.length>0){B+='flashvars="'+D+'"'}B+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}B='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';B+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var C=this.getParams();for(var E in C){B+='<param name="'+E+'" value="'+C[E]+'" />'}var A=this.getVariablePairs().join("&");if(A.length>0){B+='<param name="flashvars" value="'+A+'" />'}B+="</object>"}return B},write:function(B){if(this.getAttribute("useExpressInstall")){var A=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(A)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var C=(typeof B=="string")?document.getElementById(B):B;C.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var E=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var A=navigator.plugins["Shockwave Flash"];if(A&&A.description){E=new deconcept.PlayerVersion(A.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var B=1;var C=3;while(B){try{C++;B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+C);E=new deconcept.PlayerVersion([C,0,0])}catch(D){B=null}}}else{try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(D){try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");E=new deconcept.PlayerVersion([6,0,21]);B.AllowScriptAccess="always"}catch(D){if(E.major==6){return E}}try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(D){}}if(B!=null){E=new deconcept.PlayerVersion(B.GetVariable("$version").split(" ")[1].split(","))}}}return E};deconcept.PlayerVersion=function(A){this.major=A[0]!=null?parseInt(A[0]):0;this.minor=A[1]!=null?parseInt(A[1]):0;this.rev=A[2]!=null?parseInt(A[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(A){if(this.major<A.major){return false}if(this.major>A.major){return true}if(this.minor<A.minor){return false}if(this.minor>A.minor){return true}if(this.rev<A.rev){return false}return true};deconcept.util={getRequestParameter:function(C){var D=document.location.search||document.location.hash;if(C==null){return D}if(D){var B=D.substring(1).split("&");for(var A=0;A<B.length;A++){if(B[A].substring(0,B[A].indexOf("="))==C){return B[A].substring((B[A].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var B=document.getElementsByTagName("OBJECT");for(var C=B.length-1;C>=0;C--){B[C].style.display="none";for(var A in B[C]){if(typeof B[C][A]=="function"){B[C][A]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(A){return document.all[A]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;if(typeof neoip=="undefined"){var neoip={}}neoip.xdomrpc_t=function(G,A,C,M,L,K,J,I,H,F,E,D,B){this.m_obj_id=neoip_xdomrpc_cb_new_obj_id();this.m_callback=A;this.m_rpc_url=G;this.m_expire_delay=10;this.m_expire_timeout=setTimeout(function(O){O._expire_timeout_cb()},this.m_expire_delay*1000,this);neoip_xdomrpc_cb_doregister(this);var N=this.m_rpc_url;N+="?obj_id="+this.m_obj_id;N+="&js_callback=neoip_xdomrpc_cb_callback_from_server";N+="&method_name="+escape(C);if(M!=null){N+="&arg0="+escape(M)}if(L!=null){N+="&arg1="+escape(L)}if(K!=null){N+="&arg2="+escape(K)}if(J!=null){N+="&arg3="+escape(J)}if(I!=null){N+="&arg4="+escape(I)}if(H!=null){N+="&arg5="+escape(H)}if(F!=null){N+="&arg6="+escape(F)}if(E!=null){N+="&arg7="+escape(E)}if(D!=null){N+="&arg8="+escape(D)}if(B!=null){N+="&arg9="+escape(B)}this._call_uri=N;this.m_zerotimer_init=setTimeout(function(O){O._zerotimer_init_cb()},0*1000,this)};neoip.xdomrpc_t.prototype.destructor=function(){if(this.m_zerotimer_init){clearTimeout(this.m_zerotimer_init)}if(this.m_expire_timeout){clearTimeout(this.m_expire_timeout)}neoip_xdomrpc_cb_unregister(this);var A=document.getElementById("neoip.xdomrpc_temp_div");var B="neoip_xdomrpc_script_"+this.m_obj_id;try{A.removeChild(document.getElementById(B+"_pre"))}catch(C){}try{A.removeChild(document.getElementById(B+"_call"))}catch(C){}try{A.removeChild(document.getElementById(B+"_post"))}catch(C){}};neoip.xdomrpc_t.prototype._zerotimer_init_cb=function(){var C=this._call_uri;clearTimeout(this.m_zerotimer_init);this.m_zerotimer_init=null;var D=document.getElementById("neoip.xdomrpc_temp_div");if(!D){D=document.createElement("div");D.setAttribute("id","neoip.xdomrpc_temp_div");document.body.appendChild(D)}var E="neoip_xdomrpc_script_"+this.m_obj_id;var F="neoip_xdomrpc_script_reply_var_"+this.m_obj_id;var A=document.createElement("script");A.setAttribute("id",E+"_pre");A.appendChild(document.createTextNode(F+"=null;"));D.appendChild(A);var A=document.createElement("script");A.setAttribute("src",C);A.setAttribute("id",E+"_call");D.appendChild(A);var A=document.createElement("script");var B="neoip_xdomrpc_cb_callback_from_server("+this.m_obj_id+", "+F+");\ndelete "+F+";\n";A.setAttribute("id",E+"_post");A.appendChild(document.createTextNode(B));D.appendChild(A)};neoip.xdomrpc_t.prototype._expire_timeout_cb=function(){clearInterval(this.m_expire_timeout);this.m_expire_timeout=null;var A={code:-1,string:"expired after "+this.m_expire_delay};this.callback_cb(this.m_obj_id,A,null)};neoip.xdomrpc_t.prototype.callback_cb=function(A,C,B){console.assert(this.m_obj_id==A);if(this.m_callback){this.m_callback(C,B)}else{this.destructor()}};neoip.xdomrpc_cb_t=function(A,D,C){var B=D||window;return function(F,E){A.call(B,this,C,F,E)}};var neoip_xdomrpc_cb_arr=new Array();neoip_xdomrpc_cb_new_obj_id=function(B){var A;do{A=Math.floor(Math.random()*65536)}while(neoip_xdomrpc_cb_arr[A]);return A};neoip_xdomrpc_cb_doregister=function(A){console.assert(!neoip_xdomrpc_cb_arr[A.m_obj_id]);neoip_xdomrpc_cb_arr[A.m_obj_id]=A};neoip_xdomrpc_cb_unregister=function(A){console.assert(neoip_xdomrpc_cb_arr[A.m_obj_id]);delete neoip_xdomrpc_cb_arr[A.m_obj_id];console.assert(!neoip_xdomrpc_cb_arr[A.m_obj_id])};neoip_xdomrpc_cb_callback_from_server=function(A,B){var C=neoip_xdomrpc_cb_arr[A];console.assert(C);if(B==null){C.callback_cb(A,{code:-1,string:"Server Unreachable"},null);return }C.callback_cb(A,B.fault,B.returned_val)};if(typeof neoip=="undefined"){var neoip={}}neoip.apps_detect_t=function(C,B,A,D){this.m_callback=D;this.m_suffix_name=C;this.m_first_port=B;this.m_last_port=A;this.m_probe_xdomrpc=null;this.m_expire_delay=10;this.m_expire_timeout=setTimeout(function(E){E._expire_timeout_cb()},this.m_expire_delay*1000,this);this.m_current_port=this.m_first_port;this._launch_probe()};neoip.apps_detect_t.prototype.destructor=function(){if(this.m_probe_xdomrpc){this.m_probe_xdomrpc.destructor();this.m_probe_xdomrpc=null}if(this.m_expire_timeout){clearTimeout(this.m_expire_timeout);this.m_expire_timeout=null}};neoip.apps_detect_t.prototype.suffix_name=function(){return this.m_suffix_name};neoip.apps_detect_t.prototype.first_port=function(){return this.m_first_port};neoip.apps_detect_t.prototype.last_port=function(){return this.m_last_port};neoip.apps_detect_t.prototype._launch_probe=function(){console.assert(this.m_probe_xdomrpc==null);var A="http://127.0.0.1:"+this.m_current_port+"/neoip_"+this.m_suffix_name+"_appdetect_jsrest.js";this.m_probe_xdomrpc=new neoip.xdomrpc_t(A,neoip.xdomrpc_cb_t(this._xdomrpc_cb,this),"probe_apps")};neoip.apps_detect_t.prototype._xdomrpc_cb=function(B,D,C,A){this.m_probe_xdomrpc.destructor();this.m_probe_xdomrpc=null;if(C==null){var E={};E.outter_uri="http://127.0.0.1:"+this.m_current_port;E.version=A;E.present=true;neoip_apps_detect_arr[this.m_suffix_name]=E;if(this.m_callback){this.m_callback("found")}return }if(this.m_current_port==this.m_last_port){var E={"present":false};neoip_apps_detect_arr[this.m_suffix_name]=E;if(this.m_callback){this.m_callback("absent")}return }this.m_current_port++;this._launch_probe()};neoip.apps_detect_t.prototype._expire_timeout_cb=function(){var A={"present":false};neoip_apps_detect_arr[this.m_suffix_name]=A;if(this.m_callback){this.m_callback("expired after "+this.m_expire_delay+"-sec")}};neoip.apps_detect_cb_t=function(A,D,C){var B=D||window;return function(E){A.call(B,this,C,E)}};var neoip_apps_detect_arr=new Array();neoip.apps_present=function(A){if(neoip_apps_detect_arr[A]==null){return false}return neoip_apps_detect_arr[A].present};neoip.apps_version=function(A){console.assert(neoip.apps_present(A));return neoip_apps_detect_arr[A].version};neoip.outter_uri=function(A){console.assert(neoip.apps_present(A));return neoip_apps_detect_arr[A].outter_uri};if(typeof neoip=="undefined"){var neoip={}}neoip.apps_detect_wikidbg_t=function(){};neoip.apps_detect_wikidbg=new neoip.apps_detect_wikidbg_t();neoip.apps_detect_wikidbg_t.prototype.main_cb=function(B,A,D){if(typeof (D)=="string"){D=document.getElementById(D)}neoip.wikidbg_subelem_delete(D);var C=new neoip.wikidbg_elem_t(D);if(A=="page"){return this._page_cb(B,A,C)}else{throw"unknown keyword "+A}};neoip.apps_detect_wikidbg_t.prototype._page_cb=function(D,B,E){var C=E.table();for(var A in neoip_apps_detect_arr){var F;if(neoip.apps_present(A)){F=" <font color='green'>HAS been found</font> -";F+=" version "+neoip.apps_version(A);F+=" with outter_uri of "+neoip.outter_uri(A)}else{F="<font color='red'>HAS NOT</font> been found";F+=" running on your computer."}C.clone().tr().td().bold("neoip-"+A).up(2).td().span().inner_html(": "+F)}};if(typeof neoip=="undefined"){var neoip={}}neoip.wikidbg_subelem_delete=function(B){while(B.childNodes.length){var A=B.childNodes[0];B.removeChild(A)}};neoip.wikidbg_dump_object=function(C,E){if(typeof (E)!="object"){var A=document.createTextNode("["+typeof (E)+"] - "+E);C.appendChild(A);return }if(E==null){var A=document.createTextNode("null");C.appendChild(A);return }var A=document.createTextNode("["+typeof (E)+"]");C.appendChild(A);var D=document.createElement("ul");for(var B in E){if(typeof (E[B])=="function"){continue}var F=document.createElement("li");F.appendChild(document.createTextNode(B+": "));neoip.wikidbg_dump_object(F,E[B]);D.appendChild(F)}C.appendChild(D)};neoip.wikidbg_periodic=function(F,C,E,B,D){C.main_cb(E,B,D);var A=function(){neoip.wikidbg_periodic(F,C,E,B,D)};setTimeout(A,F)};neoip.wikidbg_elem_t=function(A){this.m_dom_elem=A};neoip.wikidbg_elem_t.prototype._append_child_elem=function(A){this.m_dom_elem.appendChild(A);this.m_dom_elem=A;return this};neoip.wikidbg_elem_t.prototype._append_child_create=function(A){var B=document.createElement(A);return this._append_child_elem(B)};neoip.wikidbg_elem_t.prototype.ul=function(){return this._append_child_create("ul")};neoip.wikidbg_elem_t.prototype.ol=function(){return this._append_child_create("ol")};neoip.wikidbg_elem_t.prototype.li=function(){return this._append_child_create("li")};neoip.wikidbg_elem_t.prototype.table=function(){return this._append_child_create("table")};neoip.wikidbg_elem_t.prototype.tr=function(){return this._append_child_create("tr")};neoip.wikidbg_elem_t.prototype.td=function(){return this._append_child_create("td")};neoip.wikidbg_elem_t.prototype.span=function(){return this._append_child_create("span")};neoip.wikidbg_elem_t.prototype.text=function(A){var B=document.createTextNode(A);return this._append_child_elem(B)};neoip.wikidbg_elem_t.prototype.inner_html=function(A){this.m_dom_elem.innerHTML=A};neoip.wikidbg_elem_t.prototype.bold=function(B){var A=this._append_child_create("b");if(typeof (B)=="undefined"){return A}return A.text(B).up()};neoip.wikidbg_elem_t.prototype.up=function(A){if(typeof (A)=="undefined"){A=1}for(var B=0;B<A;B++){this.m_dom_elem=this.m_dom_elem.parentNode}return this};neoip.wikidbg_elem_t.prototype.clone=function(){return neoip.core.object_clone(this)};if(typeof neoip=="undefined"){var neoip={}}neoip.playlist_t=function(A){if(A){this.from_jspf(A)}};neoip.playlist_t.prototype.from_jspf=function(jspf_str){var jspf_data=eval("("+jspf_str+")");var jspf_playlist=jspf_data.playlist;this.m_base_date=Date.parse(jspf_playlist.date);this.m_identifier=jspf_playlist.identifier;this.m_meta={};this.m_extension={};this.m_meta["may_loop"]=true;this.m_meta["trackidx_beg"]=0;for(var key in jspf_playlist.meta){this.m_meta[key]=jspf_playlist.meta[key]}for(var key in jspf_playlist.extension){this.m_extension[key]=jspf_playlist.extension[key]}this.m_track_arr=new Array();this.m_total_duration=0;for(var i=0;i<jspf_playlist.track.length;i++){var track=new this.track_t(this,i+this.trackidx_beg(),this.m_total_duration,jspf_playlist.track[i]);this.m_track_arr.push(track);this.m_total_duration+=this.m_track_arr[i].duration()}this.check()};neoip.playlist_t.prototype.current_track_pos=function(C){if(!C){C=new Date()}var D=C-this.m_base_date;var B=D%this.m_total_duration;for(var A=0;A<this.m_track_arr.length;A++){if(this.m_track_arr[A].m_duration>B){break}B-=this.m_track_arr[A].m_duration}console.info("i="+A);console.info("trackidx_beg()="+this.trackidx_beg());console.assert(A<this.m_track_arr.length);return{"trackidx":A+this.trackidx_beg(),"track_reltime":B}};neoip.playlist_t.prototype.current_track_pos_wseek=function(C){var B=this.current_track_pos(C);var A=this.track_at(B.trackidx);if(A.may_not_startinmid()){B.track_reltime=0}return B};neoip.playlist_t.prototype.check=function(){if(!typeof (this.m_base_date)=="number"){throw ("base_date is NOT Number")}if(!(this.m_track_arr instanceof Array)){throw ("track_arr is NOT Array")}for(var A=0;A<this.m_track_arr.length;A++){if(!(this.m_track_arr[A] instanceof this.track_t)){throw ("track "+A+" is not an playlist_t.track_t")}this.m_track_arr[A].check()}};neoip.playlist_t.prototype.is_valid=function(){try{this.check();return true}catch(A){return false}};neoip.playlist_t.prototype.same_instance_as=function(A){if(this.identifier()!=A.identifier()){return false}if(this.instance_nonce()!=A.instance_nonce()){return false}return true};neoip.playlist_t.prototype.set_outter_uri_arr=function(A){console.assert(A);this.m_outter_uri_arr=A};neoip.playlist_t.prototype.contain_trackidx=function(A){if(A<this.trackidx_beg()){return false}if(A>=this.trackidx_end()){return false}return true};neoip.playlist_t.prototype.track_at=function(A){if(!this.contain_trackidx(A)){console.info("trackidx="+A);console.info("trackidx_beg="+this.trackidx_beg());console.info("trackidx_end="+this.trackidx_end());console.trace();console.assert(false)}console.assert(this.contain_trackidx(A));return this.m_track_arr[A-this.trackidx_beg()]};neoip.playlist_t.prototype.total_duration=function(){return this.m_total_duration};neoip.playlist_t.prototype.base_date=function(){return this.m_base_date};neoip.playlist_t.prototype.identifier=function(){return this.m_identifier};neoip.playlist_t.prototype.meta=function(){return this.m_meta};neoip.playlist_t.prototype.extension=function(){return this.m_extension};neoip.playlist_t.prototype.may_loop=function(){return this.m_meta["may_loop"]};neoip.playlist_t.prototype.may_not_loop=function(){return !this.may_loop()};neoip.playlist_t.prototype.reload_delay=function(){return this.m_meta["reload_delay"]};neoip.playlist_t.prototype.instance_nonce=function(){return this.m_meta["instance_nonce"]};neoip.playlist_t.prototype.trackidx_beg=function(){return this.m_meta["trackidx_beg"]};neoip.playlist_t.prototype.trackidx_end=function(){return this.trackidx_beg()+this.m_track_arr.length};neoip.playlist_t.prototype.nb_track=function(){return this.m_track_arr.length};if(typeof neoip=="undefined"){var neoip={}}neoip.playlist_t.prototype.track_t=function(B,D,A,C){console.assert(C);this.m_playlist=B;this.m_trackidx=D;this.m_base_reltime=A;if(C){this._from_jspf(C)}};neoip.playlist_t.prototype.track_t.prototype._from_jspf=function(B){this.m_location=B.location;this.m_duration=B.duration;this.m_meta={};this.m_extension={};this.m_title="unspecified title";if(B.title){this.m_title=B.title}this.m_meta["start_time"]=0;this.m_meta["content_type"]="static";this.m_meta["prefetch_delay"]=Math.min(30*1000,this.m_duration);for(var A in B.meta){this.m_meta[A]=B.meta[A]}for(var A in B.extension){this.m_extension[A]=B.extension[A]}};neoip.playlist_t.prototype.track_t.prototype.check=function(){if(!typeof (this.m_location)=="string"){throw ("m_location is NOT a string")}if(!typeof (this.m_duration)=="number"){throw ("m_duration is NOT number")}if(typeof (this.m_meta["start_time"])!="number"){throw ("m_meta start_time is NOT number")}if(typeof (this.m_meta["content_type"])!="string"){throw ("m_meta content_type is NOT string")}if(typeof (this.m_meta["prefetch_delay"])!="number"){throw ("m_prefetch_delay is NOT number")}if(this.is_stream()){console.assert(this.m_meta["start_time"]==0)}console.assert(this.prefetch_delay()<=this.duration())};neoip.playlist_t.prototype.track_t.prototype.playlist=function(){return this.m_playlist};neoip.playlist_t.prototype.track_t.prototype.trackidx=function(){return this.m_trackidx};neoip.playlist_t.prototype.track_t.prototype.base_reltime=function(){return this.m_base_reltime};neoip.playlist_t.prototype.track_t.prototype.location=function(){return this.m_location};neoip.playlist_t.prototype.track_t.prototype.title=function(){return this.m_title};neoip.playlist_t.prototype.track_t.prototype.duration=function(){return this.m_duration};neoip.playlist_t.prototype.track_t.prototype.meta=function(){return this.m_meta};neoip.playlist_t.prototype.track_t.prototype.extension=function(){return this.m_extension};neoip.playlist_t.prototype.track_t.prototype.start_time=function(){return this.m_meta["start_time"]};neoip.playlist_t.prototype.track_t.prototype.content_type=function(){return this.m_meta["content_type"]};neoip.playlist_t.prototype.track_t.prototype.is_static=function(){return this.content_type()=="static"};neoip.playlist_t.prototype.track_t.prototype.is_stream=function(){return this.content_type()=="stream"};neoip.playlist_t.prototype.track_t.prototype.static_filelen=function(){if(this.m_extension["oload"]==null){return null}if(this.m_extension["oload"]["static_filelen"]==null){return null}return this.m_extension["oload"]["static_filelen"]};neoip.playlist_t.prototype.track_t.prototype.may_startinmid=function(){var A=this.m_playlist.m_outter_uri_arr;if(this.is_stream()){return true}console.assert(this.is_static());var B=A.oload?false:true;if(B&&!this.meta()["location_rangereq_byuri_varname"]){return false}var C=this.extension()["flv_mdata_info"];if(!C||C["kframe_index_present"]!=1){return false}return true};neoip.playlist_t.prototype.track_t.prototype.may_not_startinmid=function(){return !this.may_startinmid()};neoip.playlist_t.prototype.track_t.prototype.prefetch_delay=function(){return this.m_meta["prefetch_delay"]};neoip.playlist_t.prototype.track_t.prototype.prefetchable=function(){return this.prefetch_delay()>0};neoip.playlist_t.prototype.track_t.prototype.prefetchable_at=function(B){console.assert(B>=0&&B<this.m_playlist.total_duration());var A=this.m_base_reltime-this.prefetch_delay();var C=this.m_base_reltime;if(A<0&&this.m_playlist.may_not_loop()){A=0}if(A<0){A+=this.m_playlist.total_duration();if(B>=A){return true}if(B<=C){return true}return false}if(B<A){return false}if(B>C){return false}return true};neoip.playlist_t.prototype.track_t.prototype.outter_uri=function(){var A=this.m_playlist.m_outter_uri_arr;if(this.is_static()){return A.oload}if(this.is_stream()){return A.casto}console.assert(0);return null};neoip.playlist_t.prototype.track_t.prototype.cooked_uri=function(A){var B=this.m_playlist.m_outter_uri_arr;if(this.is_static()){if(!B.oload){return this.location()}return this._cooked_uri_static(B.oload,A)}else{if(this.is_stream()){if(!B.casto){return this.location()}return this._cooked_uri_stream(B.casto,A)}}console.assert(0);return null};neoip.playlist_t.prototype.track_t.prototype._cooked_uri_static=function(D,A){console.assert(this.is_static());var E=new neoip.nested_uri_builder_t();E.outter_uri(D);E.inner_uri(this.location());var C={};for(var B in this.extension().oload){C[B]=this.extension().oload[B]}for(var B in A){C[B]=A[B]}E.set_var_arr(C);return E.to_string()};neoip.playlist_t.prototype.track_t.prototype._cooked_uri_stream=function(E,A){console.assert(this.is_stream());var C=E+"/"+this.extension().casto.cast_name;var D={};for(var B in this.extension().casto){D[B]=this.extension().casto[B]}for(var B in A){D[B]=A[B]}for(var B in D){if(B=="cast_name"){continue}C+=C.indexOf("?")==-1?"?":"&";C+=escape(B)+"="+escape(D[B])}console.info("cookie_uri="+C);return C};neoip.playlist_t.prototype.track_t.prototype.flv_mdata_uri=function(A){var D;var E=this.extension()["flv_mdata_info"];if(!E){E={"type":"internal"}}if(E["type"]=="external"){var F=new neoip.nested_uri_builder_t();F.outter_uri(this.outter_uri());F.set_var_arr(A);F.inner_uri(E["extmdata_uri"]);D=F.to_string()}else{if(E["type"]=="internal"){var C={};for(var B in A){C[B]=A[B]}if(E["intmdata_len"]){C["read_ahead"]=E["intmdata_len"]}D=this.cooked_uri(C)}}return D};if(typeof neoip=="undefined"){var neoip={}}neoip.playlist_loader_t=function(B,A){this.m_playlist_uri=B;this.m_callback=A;this.m_reload_timeout=setTimeout(function(C){C._reload_timeout_cb()},0,this)};neoip.playlist_loader_t.prototype.destructor=function(){if(this.m_reload_timeout){clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null}};neoip.playlist_loader_t.prototype._load_playlist_now=function(){console.info("load playlist "+this.m_playlist_uri);if(this.m_reload_timeout){clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null}var A=this._file_get_insync(this.m_playlist_uri);if(A==null){var B=10*1000;console.info("unable to load playlist at "+this.m_playlist_uri+". will retry in "+B+"-sec");this.m_reload_timeout=setTimeout(function(D){D._reload_timeout_cb()},B,this);return }var C=new neoip.playlist_t(A);this._notify_callback("new_playlist",{"playlist":C});if(C.reload_delay()){this.m_reload_timeout=setTimeout(function(D){D._reload_timeout_cb()},C.reload_delay(),this);return }};neoip.playlist_loader_t.prototype._file_get_insync=function(A){var B=new XMLHttpRequest();var C=A;C+=C.indexOf("?")==-1?"?":"&";C+="nocache_workaround="+Math.floor(Math.random()*999999);B.open("GET",C,false);B.send(null);if(B.status!=200){return null}return B.responseText};neoip.playlist_loader_t.prototype._reload_timeout_cb=function(){this._load_playlist_now()};neoip.playlist_loader_t.prototype._notify_callback=function(B,A){if(this.m_callback==null){return }this.m_callback(B,A)};neoip.playlist_loader_cb_t=function(A,D,C){var B=D||window;return function(F,E){A.call(B,this,C,F,E)}};if(typeof neoip=="undefined"){var neoip={}}neoip.subplayer_cb_t=function(A,D,C){var B=D||window;return function(F,E){A.call(B,this,C,F,E)}};if(typeof neoip=="undefined"){var neoip={}}neoip.subplayer_vlc_t=function(A){this.m_plugin_id=A;this.m_callback=null;this.m_trackidx=null;this.m_start_time=null;this.m_current_state=null;this.m_plugin_abstime=null;this.m_event_period=1*1000;this.m_event_timeout=null};neoip.subplayer_vlc_t.prototype.destructor=function(){};neoip.subplayer_vlc_t.prototype.callback=function(A){this.m_callback=A};neoip.subplayer_vlc_t.prototype.current_state=function(){return this.m_current_state};neoip.subplayer_vlc_t.prototype.current_track_pos=function(){var A={"trackidx":this.m_trackidx,"track_reltime":this.track_reltime()};if(A.track_reltime==null){return null}return A};neoip.subplayer_vlc_t.prototype.track_reltime=function(){if(this.m_reltime_begdate){var A=new Date();return A-this.m_reltime_begdate}if(this.m_plugin_abstime==null){return null}if(this.m_current_state!="playing"){return null}return this.m_plugin_abstime-this.m_start_time};neoip.subplayer_vlc_t.prototype.trackidx=function(){return this.m_trackidx};neoip.subplayer_vlc_t.prototype.start_time=function(){return this.m_start_time};neoip.subplayer_vlc_t.prototype.current_state=function(){return this.m_current_state};neoip.subplayer_vlc_t.prototype.build_objembed=function(A,D,C){var B="";B+='<object type="application/x-vlc-plugin"';B+=' pluginspage="http://www.videolan.org/"';B+=' version="VideoLAN.VLCPlugin.2"';B+=' width="'+D+'"';B+=' height="'+C+'"';B+=' id="'+this.m_plugin_id+'"';B+=">";B+="</object>";document.getElementById(A).innerHTML=B};neoip.subplayer_vlc_t.prototype.play=function(C,F){var B=F.playlist().track_at(C.trackidx);var A=B.cooked_uri();this.stop();this.m_trackidx=C.trackidx;this.m_start_time=B.start_time();if(B.is_stream()){this.m_reltime_begdate=new Date()}else{this.m_reltime_begdate=null}var D=new Array();D.push(":start-time="+(this.m_start_time+C.track_reltime));D.push(":http-caching=50");var E=document.getElementById(this.m_plugin_id);E.playlist.add(A,null,D);E.playlist.play();this.m_event_timeout=setTimeout(function(G){G.event_timeout_cb()},this.m_event_period,this)};neoip.subplayer_vlc_t.prototype.stop=function(){var A=document.getElementById(this.m_plugin_id);this.m_trackidx=null;this.m_start_time=null;this.m_current_state=null;this.m_plugin_abstime=null;this.m_reltime_begdate=null;if(this.m_event_timeout){clearTimeout(this.m_event_timeout);this.m_event_timeout=null}try{if(A.playlist.isPlaying){A.playlist.stop()}if(A.playlist.tracks.count>0){A.playlist.clear()}}catch(B){console.log("exception="+B)}};neoip.subplayer_vlc_t.prototype.event_timeout_cb=function(){var D=document.getElementById(this.m_plugin_id);var B=this.m_current_state;var C;if(D.input.state==1){C="connecting"}else{if(D.input.state==2){C="buffering"}else{if(D.input.state==3){C="playing"}else{C="unknown"}}}if(C!=this.m_current_state){this.m_current_state=C;if(this.m_callback){var A={old_state:B,new_state:C};this.m_callback("changed_state",A)}}if(!D.playlist.isPlaying){return }try{var F=D.input.time}catch(E){console.info("exception="+E);return }if(F<this.m_start_time){F=this.m_start_time}this.m_plugin_abstime=F;if(this.m_callback){var A={new_time:this.track_reltime()};this.m_callback("new_time",A)}this.m_event_timeout=setTimeout(function(G){G.event_timeout_cb()},this.m_event_period,this)};if(typeof neoip=="undefined"){var neoip={}}neoip.subplayer_asplayer_t=function(A){this.m_plugin_htmlid=A;this.m_callback=null;this.m_trackidx=null;this.m_start_time=null;this.m_current_state=null;this.m_plugin_abstime=null;neoip_subplayer_asplayer_cb_doreg(this)};neoip.subplayer_asplayer_t.prototype.destructor=function(){neoip_subplayer_asplayer_cb_unreg(this)};neoip.subplayer_asplayer_t.prototype.callback=function(A){this.m_callback=A};neoip.subplayer_asplayer_t.prototype.current_state=function(){return this.m_current_state};neoip.subplayer_asplayer_t.prototype.current_track_pos=function(){var A={"trackidx":this.m_trackidx,"track_reltime":this.track_reltime()};if(A.track_reltime==null){return null}return A};neoip.subplayer_asplayer_t.prototype.track_reltime=function(){if(this.m_reltime_begdate){return(new Date()).getTime()-this.m_reltime_begdate}if(this.m_plugin_abstime==null){return null}return this.m_plugin_abstime-this.m_start_time};neoip.subplayer_asplayer_t.prototype.trackidx=function(){return this.m_trackidx};neoip.subplayer_asplayer_t.prototype.start_time=function(){return this.m_start_time};neoip.subplayer_asplayer_t.prototype.build_objembed=function(A,D,B){var C=new SWFObject("neoip_asplayer.swf",this.m_plugin_htmlid,D.toString(),B.toString(),"7","#000000",true);C.addParam("allowScriptAccess","always");var E=true;C.addParam("allowfullscreen",E?"true":"false");C.addVariable("allowfullscreen",E?"true":"false");C.addVariable("jscallback_str","neoip_subplayer_asplayer_plugin_cb");C.addVariable("jscallback_key",neoip_subplayer_asplayer_cb_build_key(this));C.write(A)};neoip.subplayer_asplayer_t.prototype.play=function(N,E){var C=E.playlist().track_at(N.trackidx);var M={};var B={};this.m_trackidx=N.trackidx;this.m_start_time=C.start_time();var F=null;if(C.is_stream()){F=null;this.m_reltime_begdate=(new Date()).getTime()-N.track_reltime}else{if(C.is_static()){F=this.m_start_time+N.track_reltime;this.m_reltime_begdate=null}else{console.assert(false)}}if(1){if(C.is_static()&&E.has_oload()){B["httpo_maxrate"]="1k";if(C.static_filelen()!=null&&C.start_time()==0){var L=5*1000;var H=C.static_filelen();var G=C.duration();var I=L*(H/G);B["httpo_maxrate_thres"]=Math.round(I)}else{B["httpo_maxrate_thres"]="500k"}B["httpo_full_id"]=neoip.core.build_nonce_str(16);M["net_ratelim"]={"key":B["httpo_full_id"],"uri":E.m_outter_uri_arr["oload"]}}}var K=C.cooked_uri(B);M["content_url"]=K;console.info("====================================");console.info("track_uri="+K+"seek_time="+F);console.dir(N);console.info("====================================");if(F>0){console.assert(C.may_startinmid());console.assert(C.is_static());M["start_time"]=F/1000;M["rangereq_type"]="flv";if(E.has_oload()){var D=C.extension()["flv_mdata_info"];M["rangereq_flv_var"]="pos";M["flv_mdata_uri"]=C.flv_mdata_uri();if(D){M["flv_mdata_type"]=D["type"]}else{M["flv_mdata_type"]="internal"}}else{var A=C.meta()["location_rangereq_byuri_varname"];console.assert(A);M["rangereq_flv_var"]=A}}console.info("startplaying with: ");console.dir(M);var J=document.getElementById(this.m_plugin_htmlid);console.assert(J.track_count()==0);J.track_add(M,0);J.playlist_loop(false);J.playing_start()};neoip.subplayer_asplayer_t.prototype.stop=function(){var A=document.getElementById(this.m_plugin_htmlid);A.playing_stop();A.track_del(0);this.m_trackidx=null;this.m_start_time=null;this.m_current_state=null;this.m_plugin_abstime=null;this.m_reltime_begdate=null};neoip.subplayer_asplayer_t.prototype.plugin_cb=function(E,A){if(E=="state_change"){var B=this.m_current_state;var C=A.new_state;if(C!=this.m_current_state){this.m_current_state=C;var D={old_state:B,new_state:C};this.notify_callback("changed_state",D)}}else{if(E=="current_time"){this.m_plugin_abstime=A.time*1000;var D={new_time:this.track_reltime()};this.notify_callback("new_time",D)}else{this.notify_callback(E,A)}}};neoip.subplayer_asplayer_t.prototype.flv_kframe_find=function(B,E,A,D){var C=document.getElementById(this.m_plugin_htmlid);C.flv_kframe_find(B/1000,E,A,D)};neoip.subplayer_asplayer_t.prototype.notify_callback=function(B,A){if(this.m_callback==null){return }this.m_callback(B,A)};var neoip_subplayer_asplayer_cb_arr=new Array();function neoip_subplayer_asplayer_cb_build_key(A){return"tag_"+A.m_plugin_htmlid}function neoip_subplayer_asplayer_cb_doreg(B){var A=neoip_subplayer_asplayer_cb_build_key(B);console.assert(!neoip_subplayer_asplayer_cb_arr[A]);neoip_subplayer_asplayer_cb_arr[A]=B}function neoip_subplayer_asplayer_cb_unreg(B){var A=neoip_subplayer_asplayer_cb_build_key(B);console.assert(neoip_subplayer_asplayer_cb_arr[A]);delete neoip_subplayer_asplayer_cb_arr[A]}function neoip_subplayer_asplayer_plugin_cb(B,D,A){var C=neoip_subplayer_asplayer_cb_arr[B];console.assert(C);C.plugin_cb(D,A)}if(typeof neoip=="undefined"){var neoip={}}neoip.player_t=function(A,B){this.m_subplayer=A;this.m_callback=B;this.m_subplayer.callback(neoip.subplayer_cb_t(this.subplayer_cb,this));this.m_playlist=null;this.m_outter_uri_arr=new Array();this.m_prefetcher_arr=new Array();this.m_curtrack_timeout=null;this.m_is_playing=false;this.m_prefetch_timeout=null;this.m_resync_period=1;this.m_resync_threshold=30*1000;this.m_resync_timeout=null};neoip.player_t.prototype.destructor=function(){if(this.is_playing()){this.playing_stop()}};neoip.player_t.prototype._curtrack_start=function(C){var B=this.m_playlist.track_at([C.trackidx]);console.dir(C);this.m_subplayer.play(C,this);var A=B.duration()-C.track_reltime;console.assert(A>=0);console.info("delay_remain="+A);this.m_curtrack_timeout=setTimeout(function(D){D._curtrack_timeout_cb()},A,this)};neoip.player_t.prototype._curtrack_stop=function(){console.info("enter trackidx="+this.m_subplayer.trackidx());console.assert(this.m_curtrack_timeout);clearTimeout(this.m_curtrack_timeout);this.m_curtrack_timeout=null;this._prefetch_try_stop(this.m_subplayer.trackidx());this.m_subplayer.stop()};neoip.player_t.prototype._curtrack_timeout_cb=function(){var B=this.m_subplayer.trackidx()+1;console.assert(this.is_playing());this._curtrack_stop();if(B>=this.m_playlist.trackidx_end()){if(this.m_playlist.may_loop()==false){console.info("next_trackidx="+B);console.info("trackidx_end="+this.m_playlist.trackidx_end());console.info("trackidx_beg="+this.m_playlist.trackidx_beg());console.assert(0);return }console.assert(B==this.m_playlist.trackidx_end());B=this.m_playlist.trackidx_beg()}console.info("next_trackidx="+B);var A={trackidx:B,track_reltime:0};this._curtrack_start(A)};neoip.player_t.prototype._prefetch_initial=function(){var A=this.m_playlist.current_track_pos();console.assert(!this.is_playing());this._prefetch_try_start(A)};neoip.player_t.prototype._prefetch_reinit_full=function(){var B=this.m_playlist.current_track_pos();console.info("ENTER prefetch_reinit_full: curtrack_pos.trackidx="+B.trackidx+" track_reltime="+B.track_reltime);if(this.m_prefetch_timeout){clearTimeout(this.m_prefetch_timeout);this.m_prefetch_timeout=null}var G=this.m_playlist.track_at(B.trackidx);var F=G.base_reltime()+B.track_reltime;var E=Number.MAX_VALUE;for(var D=this.m_playlist.trackidx_beg();D!=this.m_playlist.trackidx_end();D++){var A=this.m_playlist.track_at(D);if(!A.prefetchable()){continue}if(A.prefetchable_at(F)){this._prefetch_try_start({trackidx:A.trackidx(),track_reltime:0});continue}var C=A.base_reltime()-A.prefetch_delay();if(C<F){if(this.m_playlist.may_not_loop()){continue}C+=this.m_playlist.total_duration()}E=Math.min(E,C-F);console.assert(E>=0)}if(E!=Number.MAX_VALUE){console.info("start prefetch_timeout to expire in "+E);console.assert(E>0);this.m_prefetch_timeout=setTimeout(function(H){H._prefetch_reinit_full()},E,this)}console.info("LEAVE prefetch_reinit_full")};neoip.player_t.prototype._prefetch_try_start=function(B){var C=B.trackidx;if(this.m_prefetcher_arr[C]){return }var A=new neoip.prefetcher_t(B,this);this.m_prefetcher_arr[C]=A};neoip.player_t.prototype._prefetch_try_stop=function(B){if(!this.m_prefetcher_arr[B]){return }var A=this.m_prefetcher_arr[B];this.m_prefetcher_arr.splice(B,1);A.destructor();A=null};neoip.player_t.prototype._resync_if_needed=function(){this.m_resync_timeout=setTimeout(function(H){H._resync_if_needed()},this.m_resync_period,this);var D=this.m_playlist.current_track_pos();var C=this.m_subplayer.current_track_pos();if(C==null){return }var B=this.m_playlist.track_at(D.trackidx);var A=this.m_playlist.track_at(C.trackidx);var F=B.base_reltime()+D.track_reltime;var E=A.base_reltime()+C.track_reltime;var G=Math.abs(F-E);if(G<this.m_resync_threshold){return }console.error("NEEDS RESYNC! delta_sync="+(G/1000).toFixed(2)+"-sec");console.info("playlist track pos: trackidx="+D.trackidx+" track_reltime="+D.track_reltime);console.info("subplayer track pos: trackidx="+C.trackidx+" track_reltime="+C.track_reltime);return ;this._curtrack_stop();this._curtrack_start(D)};neoip.player_t.prototype.subplayer_cb=function(C,E,F,A){if(F=="changed_state"&&A.new_state=="playing"){this._prefetch_try_stop(this.m_subplayer.trackidx())}if(F=="changed_state"&&A.new_state=="playing"){this._prefetch_reinit_full()}if(F=="flv_kframe_find_cb"){var D=A.userptr;var B=this.m_prefetcher_arr[D];if(B){B.flv_kframe_find_cb(A)}}if(this.m_callback){this.m_callback(F,A)}};neoip.player_t.prototype.playlist=function(B){if(!B){return this.m_playlist}var C=this.m_playlist;var A=false;if(C&&C.same_instance_as(B)==false){A=true}if(B.contain_trackidx(this.m_subplayer.trackidx())==false){A=true}if(this.is_not_playing()){A=false}if(A){this.playing_stop()}this.m_playlist=B;this.m_playlist.set_outter_uri_arr(this.m_outter_uri_arr);if(A){this.playing_start()}return this.m_playlist};neoip.player_t.prototype.practical_trackidx=function(){return this.m_subplayer.trackidx()};neoip.player_t.prototype.practical_reltime=function(){return this.m_subplayer.track_reltime()};neoip.player_t.prototype.practical_state=function(){return this.m_subplayer.current_state()};neoip.player_t.prototype.set_outter_uri=function(B,A){this.m_outter_uri_arr[B]=A;if(this.m_playlist){this.m_playlist.set_outter_uri_arr(this.m_outter_uri_arr)}};neoip.player_t.prototype.has_oload=function(){return this.m_outter_uri_arr.oload!=null};neoip.player_t.prototype.has_casto=function(){return this.m_outter_uri_arr.casto!=null};neoip.player_t.prototype.is_playing=function(){return this.m_is_playing};neoip.player_t.prototype.is_not_playing=function(){return !this.is_playing()};neoip.player_t.prototype.playing_start=function(){console.assert(this.m_playlist);if(this.is_playing()){return }this.m_is_playing=true;var A=this.m_playlist.current_track_pos_wseek();this._curtrack_start(A);if(0){this.m_resync_timeout=setTimeout(function(B){B._resync_if_needed()},this.m_resync_period*1000,this)}};neoip.player_t.prototype.playing_stop=function(){for(trackidx in this.m_prefetcher_arr){this._prefetch_try_stop(trackidx)}if(!this.is_playing()){return }this.m_is_playing=false;this._curtrack_stop();if(this.m_prefetch_timeout){clearTimeout(this.m_prefetch_timeout);this.m_prefetch_timeout=null}};neoip.player_cb_t=function(A,D,C){var B=D||window;return function(F,E){A.call(B,this,C,F,E)}};if(typeof neoip=="undefined"){var neoip={}}neoip.player_wikidbg_t=function(){};neoip.player_wikidbg=new neoip.player_wikidbg_t();neoip.player_wikidbg_t.prototype.main_cb=function(B,A,D){if(typeof (D)=="string"){D=document.getElementById(D)}neoip.wikidbg_subelem_delete(D);var C=new neoip.wikidbg_elem_t(D);if(A=="page"){return this._page_cb(B,A,C)}else{if(A=="prefetch"){return this._prefetch_cb(B,A,C)}else{if(A=="admin"){return this._admin_cb(B,A,C)}else{throw"unknown keyword "+A}}}};neoip.player_wikidbg_t.prototype._page_cb=function(C,A,D){var B=D.table();B.clone().tr().td().bold("Title").up(2).td().text(": wow super title");B.clone().tr().td().bold("State").up(2).td().text(": wow super state")};neoip.player_wikidbg_t.prototype._prefetch_cb=function(E,A,G){var B=G.ol();for(var F in E.m_prefetcher_arr){var D=E.m_prefetcher_arr[F];var C=B.clone().li().table();C.clone().tr().td().bold("track idx").up(2).td().text(": "+F);C.clone().tr().td().bold("track pos").up(2).td().text(": idx:"+D.m_track_pos.trackidx).up(1).text("  reltime:"+D.m_track_pos.track_reltime);C.clone().tr().td().bold("mdata_uri").up(2).td().text(": "+D.m_mdata_uri);C.clone().tr().td().bold("track_uri").up(2).td().text(": "+D.m_track_uri)}};neoip.player_wikidbg_t.prototype._admin_cb=function(J,E,C){var A=J.practical_trackidx();var D=J.practical_reltime();var I=J.practical_state();var B=J.playlist().track_at(A);var H="undefined";if(B.title()){H=B.title()}var G="";if(D){G+=(D/1000).toFixed(2)+"-sec";G+=" - ";G+=(100*D/B.duration()).toFixed(0)+"%";G+=" of total "}else{G+="position unknown but total "}G+=(B.duration()/1000).toFixed(2)+"-sec";var F=C.table();F.clone().tr().td().bold("Title").up(2).td().text(": "+H);F.clone().tr().td().bold("State").up(2).td().text(": "+I);F.clone().tr().td().bold("Position").up(2).td().text(": "+G)};if(typeof neoip=="undefined"){var neoip={}}neoip.prefetcher_t=function(D,C){this.m_track_pos=D;this.m_player=C;console.info("m_track_pos trackidx="+D.trackidx+" track_reltime="+D.track_reltime);var B=C.m_playlist.track_at(D.trackidx);if(B.is_static()&&!C.has_oload()){return }if(B.is_stream()&&!C.has_casto()){return }var F=B.extension().flv_mdata_info;if(!F){F={"type":"internal"}}var E;if(B.is_static()){E=C.m_outter_uri_arr.oload}if(B.is_stream()){E=C.m_outter_uri_arr.casto}this.m_rpc_uri=E+"/neoip_uri_prefetch_jsrest.js";var A=B.start_time()+D.track_reltime;this.m_mdata_uri=B.flv_mdata_uri({"httpo_maxrate":"0k"});console.info("mdata_uri="+this.m_mdata_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_mdata_uri);var G=C.m_subplayer.flv_kframe_find!=null;if(G&&A>0){C.m_subplayer.flv_kframe_find(A,F.type,B.flv_mdata_uri(),D.trackidx);return }this.m_track_uri=this._cpu_track_uri();console.info("track_uri="+this.m_track_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_track_uri)};neoip.prefetcher_t.prototype.destructor=function(){if(this.m_track_uri){new neoip.xdomrpc_t(this.m_rpc_uri,null,"delete_prefetch",this.m_track_uri)}if(this.m_mdata_uri){new neoip.xdomrpc_t(this.m_rpc_uri,null,"delete_prefetch",this.m_mdata_uri)}};neoip.prefetcher_t.prototype._cpu_track_uri=function(B){var A=this.m_player.m_playlist.track_at(this.m_track_pos.trackidx);var D={"httpo_maxrate":"0k"};for(var C in B){D[C]=B[C]}return A.cooked_uri(D)};neoip.prefetcher_t.prototype.flv_kframe_find_cb=function(A){console.info("enter");console.dir(A);console.assert(!this.m_track_uri);if(A.event_type=="succeed"){this.m_track_uri=this._cpu_track_uri({"subfile_byteoffset":A.result.byte_offset})}else{this.m_track_uri=this._cpu_track_uri()}console.info("this.m_track_uri="+this.m_track_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_track_uri)};if(typeof neoip=="undefined"){var neoip={}}neoip.ezplayer_t=function(){this.m_subplayer_html_id="subplayer_plugin_html_id";this.m_subplayer_type="asplayer";this.m_fullpage_state="normal";this.m_play_post_playlist=false;this.m_autobuffer=false;this.m_playlist_uri="../playlist.jspf/sample_static.playlist.jspf"};neoip.ezplayer_t.prototype.destructor=function(){if(this.m_oload_detect){this.m_oload_detect.destructor();this.m_oload_detect=null}if(this.m_casto_detect){this.m_casto_detect.destructor();this.m_casto_detect=null}if(this.m_player){this.m_player.destructor();this.m_player=null}if(this.m_subplayer){this.m_subplayer.destructor();this.m_subplayer=null}if(this.m_embedui){this.m_embedui.destructor();this.m_embedui=null}if(this.m_playlist_loader){this.m_playlist_loader.destructor();this.m_playlist_loader=null}};neoip.ezplayer_t.prototype.play_post_playlist=function(A){console.assert(A==true||A==false);this.m_play_post_playlist=A;console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false)};neoip.ezplayer_t.prototype.autobuffer=function(A){console.assert(A==true||A==false);this.m_autobuffer=A;console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false)};neoip.ezplayer_t.prototype.fullpage_state=function(A){console.assert(A=="normal"||A=="maximized");this.m_fullpage_state=A};neoip.ezplayer_t.prototype.load_playlist_arr=function(playlist_arr_uri){var playlist_arr_str=neoip.core.download_file_insync(playlist_arr_uri);this.m_playlist_arr=eval("("+playlist_arr_str+")");var prev_playlist_uri=neoip.core.cookie_read("ezplayer_playlist_uri");if(prev_playlist_uri){ezplayer.change_playlist(prev_playlist_uri)}else{ezplayer.change_playlist(this.m_playlist_arr[0]["playlist_uri"])}};neoip.ezplayer_t.prototype.start=function(){var A=neoip.basic_cb_t(this._window_onload_cb,this);neoip.core.dom_event_listener(window,"load",A)};neoip.ezplayer_t.prototype._window_onload_cb=function(){if(this.m_subplayer_type=="vlc"){var B="playlist.isPlaying";this.m_subplayer=new neoip.subplayer_vlc_t(this.m_subplayer_html_id)}else{if(this.m_subplayer_type=="asplayer"){var B="track_count";this.m_subplayer=new neoip.subplayer_asplayer_t(this.m_subplayer_html_id)}else{console.assert(false)}}if(this.m_fullpage_state=="normal"){var C="320";var A="240"}else{if(this.m_fullpage_state=="maximized"){var C="100%";var A="100%"}else{console.assert(false)}}this.m_subplayer.build_objembed("neoip_player_container_id",C,A);objembed_wait4init(this.m_subplayer_html_id,B,100,5000,neoip.basic_cb_t(this._objembed_wait4init_cb,this));this._apps_detect_start()};neoip.ezplayer_t.prototype._objembed_wait4init_cb=function(){this.m_player=new neoip.player_t(this.m_subplayer,neoip.player_cb_t(this._neoip_player_cb,this));this.m_playlist_loader=new neoip.playlist_loader_t(this.m_playlist_uri,neoip.playlist_loader_cb_t(this._neoip_playlist_loader_cb,this));this._player_post_init();var A=document.getElementById(this.m_subplayer_html_id);if(typeof (A.embedui_create)=="function"){this.m_embedui=new neoip.ezplayer_embedui_t(this)}};neoip.ezplayer_t.prototype._player_post_init=function(){if(!this.m_player){return }for(var B in {"oload":null,"casto":null}){var A=null;if(neoip.apps_present(B)){A=neoip.outter_uri(B)}this.m_player.set_outter_uri(B,A)}console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false);if(this.m_autobuffer){this.m_player._prefetch_initial()}if(this.m_oload_detect){return }if(this.m_casto_detect){return }if(this.m_player.playlist()==null){return }if(this.m_play_post_playlist==false){return }this.m_play_post_playlist=false;neoip.core.cookie_write("ezplayer_playlist_uri",this.m_playlist_uri,30);this.playing_start()};neoip.ezplayer_t.prototype._neoip_playlist_loader_cb=function(C,B,D,A){if(!this.m_player){return }console.assert(A["playlist"]);this.m_player.playlist(A["playlist"]);if(this.m_play_post_playlist){this._player_post_init()}if(this.m_embedui){this.m_embedui.playlist_loader_cb(D,A)}};neoip.ezplayer_t.prototype._neoip_player_cb=function(C,B,D,A){if(D=="changed_state"||D=="new_time"){neoip.player_wikidbg.main_cb(this.m_player,"admin","player_info_container_id");if(this.m_embedui){this.m_embedui.neoip_player_cb(D,A)}}else{if(D=="error"){if(this.m_player.is_playing()){this.playing_stop()}if(this.m_embedui){this.m_embedui.neoip_player_cb(D,A)}}else{if(D=="embedui_event"){this.m_embedui.embedui_event_cb(A["event_type"],A["arg"])}}}};neoip.ezplayer_t.prototype._apps_detect_start=function(){var A=neoip.apps_detect_cb_t(this._apps_detect_cb,this);this.m_oload_detect=new neoip.apps_detect_t("oload",4550,4559,A);this.m_casto_detect=new neoip.apps_detect_t("casto",4560,4569,A)};neoip.ezplayer_t.prototype._apps_detect_cb=function(A,B,C){var D=A.suffix_name();if(D=="oload"){this.m_oload_detect.destructor();this.m_oload_detect=null}else{if(D=="casto"){this.m_casto_detect.destructor();this.m_casto_detect=null}else{console.assert(false)}}neoip.apps_detect_wikidbg.main_cb(null,"page","apps_detect_container_id");this._player_post_init()};neoip.ezplayer_t.prototype.change_playlist=function(A){if(this.m_playlist_loader){this.m_playlist_loader.destructor();this.m_playlist_loader=null}this.m_playlist_uri=A;if(!this.m_player){return }this.m_playlist_loader=new neoip.playlist_loader_t(this.m_playlist_uri,neoip.playlist_loader_cb_t(this._neoip_playlist_loader_cb,this))};neoip.ezplayer_t.prototype.playing_start=function(){this.m_player.playing_start();if(this.m_embedui){this.m_embedui.playing_start()}};neoip.ezplayer_t.prototype.playing_stop=function(){this.m_player.playing_stop();if(this.m_embedui){this.m_embedui.playing_stop()}};if(typeof neoip=="undefined"){var neoip={}}neoip.ezplayer_embedui_t=function(C){this.m_ezplayer=C;var B=this._get_plugin();var A={"embedui_class":"root_stage","embedui_id":"embedui_id_root_stage","userptr":{"embedui_id":"embedui_id_root_stage",},"element_opt":{}};B.embedui_create(A);this._sound_init_from_cookie();var A={"embedui_class":"button_volume","embedui_id":"embedui_id_volume","userptr":{"embedui_id":"embedui_id_volume",},"element_opt":{"sound_vol":B.get_sound_vol(),"sound_mute":B.get_sound_mute()},"base_sprite":{"element_x":0,"element_y":0,"element_w":0.1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"mouse_over"},};B.embedui_create(A);var A={"embedui_class":"button_bitmap","embedui_id":"embedui_id_winsizer","userptr":{"embedui_id":"embedui_id_winsizer",},"element_opt":{"type":"vector","location":B.get_fullscreen()?"win_normalizer":"win_maximizer"},"base_sprite":{"element_x":1,"element_y":0,"element_w":0.08,"element_h":0,"anchor_x":0,"anchor_y":0,"display_type":"mouse_over"},};B.embedui_create(A);var A={"embedui_class":"button_bitmap","embedui_id":"embedui_id_playlist_toggle","userptr":{"embedui_id":"embedui_id_playlist_toggle",},"element_opt":{"type":"embedded","location":"embed_pic_globe"},"base_sprite":{"element_x":0,"element_y":0.5,"element_w":0.08,"element_h":0,"display_type":"mouse_over"},};B.embedui_create(A);var A={"embedui_class":"text_caption","embedui_id":"embedui_id_track_title","userptr":{"embedui_id":"embedui_id_track_title",},"element_opt":{"text":" ","font_size":100/1024},"base_sprite":{"element_x":0.5,"element_y":0.8,"element_w":1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"timeout","timeout_delay":4*1000,"mouse_action":false},};B.embedui_create(A);var A={"embedui_class":"text_caption","embedui_id":"embedui_id_status_line","userptr":{"embedui_id":"embedui_id_status_line",},"element_opt":{"text":" ","font_size":100/1024,"font_color":16711680},"base_sprite":{"element_x":0.5,"element_y":0.2,"element_w":1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"timeout","timeout_delay":4*1000,"mouse_action":false},};B.embedui_create(A);this._reinit_playstop_buttons()};neoip.ezplayer_embedui_t.prototype.destructor=function(){var A=this._get_plugin();A.embedui_delete("embedui_id_root_stage");A.embedui_delete("embedui_id_volume");A.embedui_delete("embedui_id_winsizer");A.embedui_delete("embedui_id_playlist_toggle");A.embedui_delete("embedui_id_track_title");A.embedui_delete("embedui_id_status_line");this._embedui_delete_playlist_select();this._embedui_delete_play();this._embedui_delete_stop();this._embedui_delete_busy()};neoip.ezplayer_embedui_t.prototype._sound_init_from_cookie=function(){var A=this._get_plugin();ezplayer_sound_mute=neoip.core.cookie_read("ezplayer_sound_mute");if(ezplayer_sound_mute){A.set_sound_mute(Number(ezplayer_sound_mute))}ezplayer_sound_vol=neoip.core.cookie_read("ezplayer_sound_vol");if(ezplayer_sound_vol){A.set_sound_vol(ezplayer_sound_vol)}};neoip.ezplayer_embedui_t.prototype._get_plugin=function(){return document.getElementById(this.m_ezplayer.m_subplayer_html_id)};neoip.ezplayer_embedui_t.prototype.embedui_event_cb=function(D,A){var B=A["userptr"];var C=B["embedui_id"];if(C=="embedui_id_root_stage"){return this._embedui_root_stage_cb(D,A)}else{if(C=="embedui_id_volume"){return this._embedui_button_vol_cb(D,A)}else{if(C=="embedui_id_winsizer"){return this._embedui_button_winsizer_cb(D,A)}else{if(C=="embedui_id_play"&&D=="click"){return this.m_ezplayer.playing_start()}else{if(C=="embedui_id_stop"&&D=="click"){return this.m_ezplayer.playing_stop()}else{if(C=="embedui_id_playlist_toggle"){return this._embedui_playlist_toggle_cb(D,A)}else{if(C=="embedui_id_playlist_select"){return this._embedui_playlist_select_cb(D,A)}}}}}}}};neoip.ezplayer_embedui_t.prototype._embedui_button_vol_cb=function(F,A){var E="embedui_id_volume";var C=this._get_plugin();if(F=="click"){C.set_sound_mute(!C.get_sound_mute());neoip.core.cookie_write("ezplayer_sound_mute",Number(C.get_sound_mute()),30);C.embedui_update(E,{"action":"element_update_opt","arg":{"sound_mute":C.get_sound_mute()}})}if(F=="mouseWheel"){var D=A["wheel_delta"]*0.1;var B=C.get_sound_vol()+D;B=Math.max(B,0);B=Math.min(B,1);C.set_sound_vol(B);neoip.core.cookie_write("ezplayer_sound_vol",C.get_sound_vol(),30);C.embedui_update(E,{"action":"element_update_opt","arg":{"sound_vol":C.get_sound_vol()}})}};neoip.ezplayer_embedui_t.prototype._embedui_button_winsizer_cb=function(H,A){var G="embedui_id_winsizer";var E=this._get_plugin();var C=E.may_fullscreen();if(H=="click"&&C){E.set_fullscreen(!E.get_fullscreen())}else{if(H=="mouseWheel"||H=="click"){if(E.getAttribute("width")=="100%"){E.setAttribute("width","320");E.setAttribute("height","240")}else{E.setAttribute("width","100%");E.setAttribute("height","100%")}}}E.embedui_update(G,{"action":"base_reset_state","arg":{"new_state":"invisible"}});var F=E.get_fullscreen();var B=E.getAttribute("width")=="100%";var D=C?F:B;E.embedui_update(G,{"action":"element_update_opt","arg":{"location":D?"win_normalizer":"win_maximizer"}})};neoip.ezplayer_embedui_t.prototype._embedui_root_stage_cb=function(E,A){var D="embedui_id_root_stage";var C=this._get_plugin();if(E=="doubleClick"&&C.may_fullscreen()){C.set_fullscreen(!C.get_fullscreen());C.embedui_update("embedui_id_winsizer",{"action":"element_update_opt","arg":{"location":C.get_fullscreen()?"win_normalizer":"win_maximizer"}})}if(E=="changed_state"){var B=A["new_state"];if(B=="idle_detect"){C.embedui_update(D,{"action":"element_update_opt","arg":{"mouse_visibility":"show"}})}else{C.embedui_update(D,{"action":"element_update_opt","arg":{"mouse_visibility":"hide"}})}}};neoip.ezplayer_embedui_t.prototype._embedui_playlist_toggle_cb=function(D,A){var C="embedui_id_playlist_select";var B=this._get_plugin();if(D!="click"){return }if(!B.embedui_exist(C)){this._embedui_create_playlist_select()}else{this._embedui_delete_playlist_select()}this._reinit_playstop_buttons()};neoip.ezplayer_embedui_t.prototype._embedui_playlist_select_cb=function(D,A){var B=A["selected_idx"];var C=A["item_userptr"];console.info("enter selected_idx="+B);console.dir(A);this._embedui_delete_playlist_select();this._reinit_playstop_buttons();this.m_ezplayer.play_post_playlist(true);this.m_ezplayer.change_playlist(C["playlist_uri"])};neoip.ezplayer_embedui_t.prototype._embedui_create_playlist_select=function(){var D=this._get_plugin();var F="embedui_id_playlist_select";if(D.embedui_exist(F)==true){return }var A={"embedui_class":"select_list","embedui_id":"embedui_id_playlist_select","userptr":{"embedui_id":"embedui_id_playlist_select",},"element_opt":{"selected_idx":0,"item_w":500/1024,"item_h":70/768,"box_t":7/1024,"margin_w":10/1024,"margin_h":0/768,"font_size":60/1024,"item_arr":["FILLED DYNAMICALLY JUST AFTER"]}};var E=[];for(var B=0;B<this.m_ezplayer.m_playlist_arr.length;B++){var C=this.m_ezplayer.m_playlist_arr[B];E.push({"display_text":C["playlist_title"],"item_userptr":{"playlist_uri":C["playlist_uri"]}})}A["element_opt"]["item_arr"]=E;for(var B=0;B<this.m_ezplayer.m_playlist_arr.length;B++){var C=this.m_ezplayer.m_playlist_arr[B];if(C["playlist_uri"]==this.m_ezplayer.m_playlist_uri){A["element_opt"]["selected_idx"]=B;break}}D.embedui_create(A)};neoip.ezplayer_embedui_t.prototype._embedui_delete_playlist_select=function(){var A=this._get_plugin();var B="embedui_id_playlist_select";if(A.embedui_exist(B)==false){return }A.embedui_delete(B)};neoip.ezplayer_embedui_t.prototype.neoip_player_cb=function(H,A){var D=this._get_plugin();if(H=="changed_state"&&A["new_state"]=="playing"){var C=this.m_ezplayer.m_player.practical_trackidx();var B=this.m_ezplayer.m_player.playlist().track_at(C);var G=B.title();var F="embedui_id_track_title";D.embedui_update(F,{"action":"base_reset_state","arg":{"new_state":"invisible"}});D.embedui_update(F,{"action":"element_update_opt","arg":{"text":G}});D.embedui_update(F,{"action":"base_reset_state","arg":{"new_state":"appearing"}})}else{if(H=="error"){var F="embedui_id_status_line";var E=A["reason"].replace("."," ","g");D.embedui_update(F,{"action":"base_reset_state","arg":{"new_state":"invisible"}});D.embedui_update(F,{"action":"element_update_opt","arg":{"text":E}});D.embedui_update(F,{"action":"base_reset_state","arg":{"new_state":"appearing"}})}}if(H=="changed_state"){this._reinit_playstop_buttons()}};neoip.ezplayer_embedui_t.prototype.playlist_loader_cb=function(B,A){this._reinit_playstop_buttons()};neoip.ezplayer_embedui_t.prototype.playing_start=function(){this._reinit_playstop_buttons()};neoip.ezplayer_embedui_t.prototype.playing_stop=function(){this._reinit_playstop_buttons();var A=this._get_plugin();A.embedui_update("embedui_id_track_title",{"action":"base_reset_state","arg":{"new_state":"invisible"}})};neoip.ezplayer_embedui_t.prototype._reinit_playstop_buttons=function(){var A=this._get_plugin();if(A.embedui_exist("embedui_id_playlist_select")){this._embedui_delete_play();this._embedui_delete_stop();this._embedui_delete_busy();return }var B=this.m_ezplayer.m_player.practical_state();if(B=="kframefinding"||B=="connecting"){this._embedui_create_busy()}else{this._embedui_delete_busy()}if(this.m_ezplayer.m_player.is_playing()){this._embedui_delete_play();this._embedui_create_stop()}else{this._embedui_delete_stop();this._embedui_create_play()}};neoip.ezplayer_embedui_t.prototype._embedui_create_play=function(){var B=this._get_plugin();var C="embedui_id_play";if(B.embedui_exist(C)==true){return }var A={"embedui_class":"button_bitmap","embedui_id":C,"userptr":{"embedui_id":C,},"element_opt":{"type":"vector","location":"play"},"base_sprite":{"element_x":0.5,"element_y":0.5,"element_w":0.1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"always"},};B.embedui_create(A)};neoip.ezplayer_embedui_t.prototype._embedui_delete_play=function(){var A=this._get_plugin();var B="embedui_id_play";if(A.embedui_exist(B)==false){return }A.embedui_delete(B)};neoip.ezplayer_embedui_t.prototype._embedui_create_stop=function(){var B=this._get_plugin();var C="embedui_id_stop";if(B.embedui_exist(C)==true){return }var A={"embedui_class":"button_bitmap","embedui_id":C,"userptr":{"embedui_id":C,},"element_opt":{"type":"vector","location":"stop"},"base_sprite":{"element_x":0.5,"element_y":0.5,"element_w":0.1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"mouse_over"},};B.embedui_create(A)};neoip.ezplayer_embedui_t.prototype._embedui_delete_stop=function(){var A=this._get_plugin();var B="embedui_id_stop";if(A.embedui_exist(B)==false){return }A.embedui_delete(B)};neoip.ezplayer_embedui_t.prototype._embedui_create_busy=function(){var B=this._get_plugin();var C="embedui_id_busy";if(B.embedui_exist(C)==true){return }var A={"embedui_class":"button_busy","embedui_id":C,"userptr":{"embedui_id":C,},"base_sprite":{"element_x":0.5,"element_y":0.5,"element_w":0.1,"element_h":0,"anchor_x":0.5,"anchor_y":0.5,"display_type":"always",},};B.embedui_create(A)};neoip.ezplayer_embedui_t.prototype._embedui_delete_busy=function(){var A=this._get_plugin();var B="embedui_id_busy";if(A.embedui_exist(B)==false){return }A.embedui_delete(B)}